# –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–¥–∞–Ω–∏—è

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-11-30  
**–°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤:** ‚úÖ –í—Å–µ 8 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

---

## ‚úÖ 1. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **Python 3.12+**
- **Granian** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ gunicorn/uvicorn –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Litestar
- **Litestar** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ FastAPI/Flask
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è ORM** ‚Äî SQLAlchemy/Tortoise
- **–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è** - black (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ on-save)

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ **Python 3.12**: `Dockerfile` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `FROM python:3.12-slim`
- ‚úÖ **Granian >= 1.5**: —É–∫–∞–∑–∞–Ω –≤ `requirements.txt`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `Dockerfile` CMD
- ‚úÖ **Litestar >= 2.8**: —É–∫–∞–∑–∞–Ω –≤ `requirements.txt`
- ‚úÖ **SQLAlchemy[asyncio] >= 2.0**: —É–∫–∞–∑–∞–Ω –≤ `requirements.txt`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫
- ‚úÖ **Black >= 24.10**: —É–∫–∞–∑–∞–Ω –≤ `requirements.txt`, –Ω–∞—Å—Ç—Ä–æ–µ–Ω `pyproject.toml`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–≤'—è–∑–æ–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É –≤–∑–∞—î–º–æ–¥—ñ—é Litestar –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `sqlalchemy[asyncio]` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- ‚úÖ `AsyncSession` –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î (`app/db.py`)
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (`async def`)
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å –ë–î, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- ‚úÖ Dependency Injection –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 3. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞—è–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑ —Ñ–∞–π–ª—É `.env`. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π pydantic-settings –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `pydantic-settings >= 2.2` (`app/config.py`)
- ‚úÖ –ö–ª–∞—Å—Å `Settings` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `BaseSettings`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω `SettingsConfigDict` —Å `env_file=".env"` –∏ `env_prefix="APP_"`
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  - `APP_ENV`, `APP_SERVER_HOST`, `APP_SERVER_PORT`
  - `APP_ALLOWED_ORIGINS` (—Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º JSON)
  - `APP_DB_URL`, `APP_GRANIAN_WORKERS`
  - `APP_ECHO_SQL`, `APP_LOG_LEVEL`
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `env.example` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 4. API - –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —Å DRF

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å API –¥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ DRF ([—Ñ–∞–π–ª —Ç—É—Ç](admin_panel/api/offer_walls.py))

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

#### ‚úÖ GET /api/offerwalls/{token}
- **DRF**: `GET /offerwalls/<token>/` —á–µ—Ä–µ–∑ `RetrieveModelMixin` —Å `lookup_field="token"`
- **Litestar**: `GET /api/offerwalls/{token:str}` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- **–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**: –∏–¥–µ–Ω—Ç–∏—á–µ–Ω DRF
  ```json
  {
    "token": "...",
    "name": "...",
    "url": "...",
    "description": "...",
    "offer_assignments": [{"offer": {...}}],
    "popup_assignments": [{"offer": {...}}]
  }
  ```
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ –ø–æ–ª—é `order`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ 404 –æ—à–∏–±–æ–∫

#### ‚úÖ GET /api/offerwalls/get_offer_names
- **DRF**: `GET /offerwalls/get_offer_names/` —á–µ—Ä–µ–∑ `@action(methods=["get"], detail=False)`
- **Litestar**: `GET /api/offerwalls/get_offer_names` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- **–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**: –∏–¥–µ–Ω—Ç–∏—á–µ–Ω DRF
  ```json
  {
    "offer_names": ["Loanplus", "SgroshiCPA2", ...]
  }
  ```
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ä—Ç–µ–∂–∞ `[offer_name[0] for offer_name in OfferChoices.choices]` (–∫–∞–∫ –≤ DRF)

#### ‚úÖ GET /api/offerwalls/by_url/{url}
- **DRF**: —É–ø–æ–º—è–Ω—É—Ç –≤ README –∫–∞–∫ `/offerwalls/by_url/<url>/`
- **Litestar**: `GET /api/offerwalls/by_url/{url:str}` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –ø–æ —Ç–æ–∫–µ–Ω—É

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º (Pydantic vs DRF Serializers):

#### ‚úÖ OfferSerializer
- **DRF –ø–æ–ª—è**: uuid, id, url, is_active, name, sum_to, term_to, percent_rate
- **Pydantic –ø–æ–ª—è**: –∏–¥–µ–Ω—Ç–∏—á–Ω—ã, –≤—Å–µ 8 –ø–æ–ª–µ–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

#### ‚úÖ OfferWallOfferSerializer
- **DRF**: `{"offer": OfferSerializer()}`
- **Pydantic**: `OfferWallOffer(offer: Offer)` - –∏–¥–µ–Ω—Ç–∏—á–Ω–æ

#### ‚úÖ OfferWallPopupOfferSerializer
- **DRF**: `{"offer": OfferSerializer()}`
- **Pydantic**: `OfferWallPopupOffer(offer: Offer)` - –∏–¥–µ–Ω—Ç–∏—á–Ω–æ

#### ‚úÖ OfferWallSerializer
- **DRF –ø–æ–ª—è**: token, name, url, description, offer_assignments, popup_assignments
- **Pydantic –ø–æ–ª—è**: –∏–¥–µ–Ω—Ç–∏—á–Ω—ã, –≤—Å–µ 6 –ø–æ–ª–µ–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ñ–æ—Ä–º–∞—Ç—É DRF

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** - API –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–µ–Ω DRF

---

## ‚úÖ 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
DRF —Ç–∞ Litestar –≥–µ–Ω–µ—Ä—É—é—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- –ü–æ—Ç–æ—á–Ω–∞ DRF –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: http://127.0.0.1:8000/api/swagger/
- Litestar —Å—Ö–µ–º–∞ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º): http://localhost:5000/schema

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω `OpenAPIConfig` –≤ `app/server.py`
- ‚úÖ –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏–º–µ—é—Ç –æ–ø–∏—Å–∞–Ω–∏—è (`summary`, `description`)
- ‚úÖ –£–∫–∞–∑–∞–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –≤ `responses`
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/schema` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—É—Ç—å Litestar)
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
  - `docs/tests/README.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
  - `docs/c4/README.md` - C4 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
  - `docs/c4/workspace.dsl` - Structurizr –º–æ–¥–µ–ª—å

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 6. –Ü–∑–æ–ª—è—Ü—ñ—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–†–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å –≤ –æ–∫—Ä–µ–º—ñ–π –ø–∞–ø—Ü—ñ –∑ –≤–ª–∞—Å–Ω–∏–º–∏:
- requirements.txt
- Dockerfile

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ (–Ω–µ –≤–Ω—É—Ç—Ä–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
- ‚úÖ –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `requirements.txt` —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `Dockerfile` –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –≤ –ø–∞–ø–∫–µ `app/`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 7. Docker-compose

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Ñ–∞–π–ª–∏ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–∫—Ä–µ–º–æ–≥–æ Dockerfile

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ `docker-compose.yaml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å —Ç—Ä–µ–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏:
  - `db` - PostgreSQL 16
  - `api` - Litestar –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (build –∏–∑ Dockerfile)
  - `nginx` - –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä
- ‚úÖ –°–µ—Ä–≤–∏—Å `api` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `build: .` –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏–∑ Dockerfile
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (`depends_on`)
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Healthcheck –¥–ª—è PostgreSQL

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 8. Nginx

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä–µ—Å–ø—Ä—è–º—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –∑ domain.com/api/ –Ω–∞ Litestar
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Nginx: [nginx/conf/nginx.conf](nginx/conf/nginx.conf)

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –§–∞–π–ª `nginx/conf/nginx.conf` —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ `/api/*` –Ω–∞ `litestar_api:8000`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `/api/` —á–µ—Ä–µ–∑ `rewrite ^/api/(.*)$ /$1 break`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:
  - `Host`, `X-Real-IP`, `X-Forwarded-For`, `X-Forwarded-Proto`
- ‚úÖ –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `docker-compose.yaml`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 9. –ó–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ—î–∫—Ç—É –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `python -m app` (–≤–µ–¥–µ –¥–æ `__main__.py`).

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –§–∞–π–ª `app/__main__.py` —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `python -m app` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ `granian` (–∫–∞–∫ –≤ Dockerfile)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ 10. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ (–∏–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫):
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π [error_handler.example.py](error_handler.example.py) –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫.

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `NotFoundException` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 —Å `{"detail": "Not found."}`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `ValidationError` (Pydantic) - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `SQLAlchemyError` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500
- ‚úÖ Exception handlers –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Litestar app
- ‚úÖ –°–∏–≥–Ω–∞—Ç—É—Ä—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (–ø—Ä–∏–Ω–∏–º–∞—é—Ç `_request` –∏ `exc`)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
pytest tests/ -v
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
============================= test session starts =============================
collected 8 items

tests/test_offerwalls.py::test_get_offer_names PASSED                    [ 12%]
tests/test_offerwalls.py::test_get_offerwall_not_found PASSED            [ 25%]
tests/test_offerwalls.py::test_get_offerwall_ok PASSED                   [ 37%]
tests/unit/test_offerwall_service.py::test_service_list_returns_items PASSED [ 50%]
tests/unit/test_offerwall_service.py::test_service_list_filters_by_name PASSED [ 62%]
tests/unit/test_offerwall_service.py::test_service_get_by_token_success PASSED [ 75%]
tests/unit/test_offerwall_service.py::test_service_get_by_token_not_found_raises PASSED [ 87%]
tests/unit/test_offerwall_service.py::test_service_get_offer_names_non_empty PASSED [100%]

============================== 8 passed in 0.94s ==============================
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–•–û–î–Ø–¢**

---

## üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:
  - `domain/` - –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –ø–æ—Ä—Ç—ã (Protocol)
  - `application/` - —Å–µ—Ä–≤–∏—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
  - `infrastructure/` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (SQLAlchemy)
  - `routes/` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚úÖ Dependency Injection —á–µ—Ä–µ–∑ Litestar DI
- ‚úÖ Repository –ø–∞—Ç—Ç–µ—Ä–Ω —Å Protocol –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
- ‚úÖ `@runtime_checkable` –¥–ª—è Protocol (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

### ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ 5 –º–æ–¥–µ–ª–µ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
  - `Offer` - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
  - `OfferWall` - –æ—Ñ—Ñ–µ—Ä–≤–æ–ª–ª—ã
  - `OfferAssignment` - —Å–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞
  - `PopupAssignment` - —Å–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è popup
  - `OfferChoices` - 36 –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ type hints
- ‚úÖ –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –∫–æ–¥–∞ (—É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: **100%** ‚úÖ

### –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
1. ‚úÖ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
2. ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–≤'—è–∑–æ–∫
3. ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ .env –∏ pydantic-settings
4. ‚úÖ API –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —Å DRF
5. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
6. ‚úÖ –Ü–∑–æ–ª—è—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç–∞
7. ‚úÖ Docker-compose
8. ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
9. ‚úÖ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ python -m app
10. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- ‚úÖ –í—Å–µ 8 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ñ—Ñ–µ—Ä–≤–æ–ª–ª–∞ –ø–æ —Ç–æ–∫–µ–Ω—É (—É—Å–ø–µ—Ö –∏ 404)
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ñ—Ñ–µ—Ä–≤–æ–ª–ª–∞ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
  - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/offerwalls/by_url/{url}` (—É–ø–æ–º—è–Ω—É—Ç –≤ README –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/offerwalls` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ –§–∞–π–ª `env.example` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∑–∞–¥–∞–Ω–∏—è.**

–í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- ‚úÖ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ API –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É DRF
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Docker –∏ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é.**

